{
  "version": "1.1.0",
  "trd_file": "docs/TRD/testing-phase.md",
  "trd_version": "1.3.0",
  "trd_hash": "consolidated-phases",
  "branch": "feature/trd-implementation",
  "strategy": "tdd",
  "phase_cursor": 3,
  "phase_structure": {
    "1": { "name": "Unit Tests", "tasks": "001-022, 086-092" },
    "2": { "name": "Infrastructure", "tasks": "023-032" },
    "3": { "name": "Observability", "tasks": "062-065", "parallel_with": ["4A", "4B"] },
    "4": { "name": "Eval Framework", "parallel_with": ["3"], "tracks": {
      "A": { "name": "Structure Verification", "tasks": "033-035, 054-061" },
      "B": { "name": "Eval Tooling", "tasks": "066-083" }
    }, "final": "084-085" }
  },
  "superseded_tasks": {
    "TRD-TEST-036": { "reason": "Replaced by developing-with-python.yaml eval (TRD-TEST-075)" },
    "TRD-TEST-037": { "reason": "Replaced by developing-with-python.yaml eval (TRD-TEST-075)" },
    "TRD-TEST-038": { "reason": "Replaced by developing-with-flutter.yaml eval (TRD-TEST-076)" },
    "TRD-TEST-039": { "reason": "Replaced by developing-with-flutter.yaml eval (TRD-TEST-076)" },
    "TRD-TEST-040": { "reason": "Replaced by developing-with-typescript.yaml eval (TRD-TEST-077)" },
    "TRD-TEST-041": { "reason": "Replaced by developing-with-typescript.yaml eval (TRD-TEST-077)" },
    "TRD-TEST-042": { "reason": "Replaced by using-fastapi.yaml eval (TRD-TEST-078)" },
    "TRD-TEST-043": { "reason": "Replaced by using-fastapi.yaml eval (TRD-TEST-078)" },
    "TRD-TEST-044": { "reason": "Replaced by pytest.yaml eval (TRD-TEST-079)" },
    "TRD-TEST-045": { "reason": "Replaced by pytest.yaml eval (TRD-TEST-079)" },
    "TRD-TEST-046": { "reason": "Replaced by backend-implementer.yaml eval (TRD-TEST-080)" },
    "TRD-TEST-047": { "reason": "Replaced by backend-implementer.yaml eval (TRD-TEST-080)" },
    "TRD-TEST-048": { "reason": "Replaced by verify-app.yaml eval (TRD-TEST-081)" },
    "TRD-TEST-049": { "reason": "Replaced by verify-app.yaml eval (TRD-TEST-081)" },
    "TRD-TEST-050": { "reason": "Replaced by code-simplifier.yaml eval (TRD-TEST-082)" },
    "TRD-TEST-051": { "reason": "Replaced by code-simplifier.yaml eval (TRD-TEST-082)" },
    "TRD-TEST-052": { "reason": "Replaced by code-reviewer.yaml eval (TRD-TEST-083)" },
    "TRD-TEST-053": { "reason": "Replaced by code-reviewer.yaml eval (TRD-TEST-083)" }
  },
  "tasks": {
    "TRD-TEST-001": { "status": "completed", "component": "permitter", "phase": 1 },
    "TRD-TEST-002": { "status": "completed", "component": "permitter", "phase": 1 },
    "TRD-TEST-003": { "status": "completed", "component": "permitter", "phase": 1 },
    "TRD-TEST-004": { "status": "completed", "component": "router", "phase": 1 },
    "TRD-TEST-005": { "status": "completed", "component": "router", "phase": 1 },
    "TRD-TEST-006": { "status": "completed", "component": "router", "phase": 1 },
    "TRD-TEST-007": { "status": "completed", "component": "status-hook", "phase": 1 },
    "TRD-TEST-008": { "status": "completed", "component": "status-hook", "phase": 1 },
    "TRD-TEST-009": { "status": "completed", "component": "status-hook", "phase": 1 },
    "TRD-TEST-010": { "status": "completed", "component": "formatter-hook", "phase": 1 },
    "TRD-TEST-011": { "status": "completed", "component": "formatter-hook", "phase": 1 },
    "TRD-TEST-012": { "status": "completed", "component": "formatter-hook", "phase": 1 },
    "TRD-TEST-013": { "status": "completed", "component": "learning-hook", "phase": 1 },
    "TRD-TEST-014": { "status": "completed", "component": "learning-hook", "phase": 1 },
    "TRD-TEST-015": { "status": "completed", "component": "learning-hook", "phase": 1 },
    "TRD-TEST-016": { "status": "completed", "component": "scripts", "phase": 1 },
    "TRD-TEST-017": { "status": "completed", "component": "scripts", "phase": 1 },
    "TRD-TEST-018": { "status": "completed", "component": "scripts", "phase": 1 },
    "TRD-TEST-019": { "status": "completed", "component": "scripts", "phase": 1 },
    "TRD-TEST-020": { "status": "completed", "component": "scripts", "phase": 1 },
    "TRD-TEST-021": { "status": "completed", "component": "scripts", "phase": 1 },
    "TRD-TEST-022": { "status": "completed", "component": "scripts", "phase": 1 },
    "TRD-TEST-086": { "status": "completed", "component": "agent-validation", "phase": 1 },
    "TRD-TEST-087": { "status": "completed", "component": "agent-validation", "phase": 1 },
    "TRD-TEST-088": { "status": "completed", "component": "agent-validation", "phase": 1 },
    "TRD-TEST-089": { "status": "completed", "component": "agent-validation", "phase": 1 },
    "TRD-TEST-090": { "status": "completed", "component": "agent-validation", "phase": 1 },
    "TRD-TEST-091": { "status": "completed", "component": "agent-validation", "phase": 1 },
    "TRD-TEST-092": { "status": "completed", "component": "agent-validation", "phase": 1 },
    "TRD-TEST-023": { "status": "completed", "component": "infrastructure", "phase": 2 },
    "TRD-TEST-024": { "status": "completed", "component": "fixtures", "phase": 2 },
    "TRD-TEST-025": { "status": "completed", "component": "fixtures", "phase": 2 },
    "TRD-TEST-026": { "status": "completed", "component": "fixtures", "phase": 2 },
    "TRD-TEST-027": { "status": "completed", "component": "fixtures", "phase": 2 },
    "TRD-TEST-028": { "status": "completed", "component": "fixtures", "phase": 2 },
    "TRD-TEST-029": { "status": "completed", "component": "infrastructure", "phase": 2 },
    "TRD-TEST-030": { "status": "completed", "component": "infrastructure", "phase": 2 },
    "TRD-TEST-031": { "status": "completed", "component": "infrastructure", "phase": 2 },
    "TRD-TEST-032": { "status": "completed", "component": "infrastructure", "phase": 2 },
    "TRD-TEST-033": { "status": "completed", "component": "vendoring", "phase": "4A", "artifact": "test/integration/tests/vendoring.test.sh" },
    "TRD-TEST-034": { "status": "completed", "component": "vendoring", "phase": "4A", "artifact": "test/integration/tests/vendoring.test.sh" },
    "TRD-TEST-035": { "status": "completed", "component": "vendoring", "phase": "4A", "artifact": "test/integration/tests/vendoring.test.sh" },
    "TRD-TEST-054": { "status": "completed", "component": "commands", "phase": "4A", "artifact": "test/integration/tests/commands.test.sh" },
    "TRD-TEST-055": { "status": "completed", "component": "commands", "phase": "4A", "artifact": "test/integration/tests/commands.test.sh" },
    "TRD-TEST-056": { "status": "completed", "component": "commands", "phase": "4A", "artifact": "test/integration/tests/commands.test.sh" },
    "TRD-TEST-057": { "status": "completed", "component": "commands", "phase": "4A", "artifact": "test/integration/tests/commands.test.sh" },
    "TRD-TEST-058": { "status": "completed", "component": "commands", "phase": "4A", "artifact": "test/integration/tests/commands.test.sh" },
    "TRD-TEST-059": { "status": "completed", "component": "commands", "phase": "4A", "artifact": "test/integration/tests/commands.test.sh" },
    "TRD-TEST-060": { "status": "completed", "component": "commands", "phase": "4A", "artifact": "test/integration/tests/commands.test.sh" },
    "TRD-TEST-061": { "status": "completed", "component": "commands", "phase": "4A", "artifact": "test/integration/tests/commands.test.sh" },
    "TRD-TEST-062": { "status": "completed", "component": "observability", "phase": 3, "artifact": "test/integration/scripts/run-headless.sh (verified)", "notes": "OTel config verified complete" },
    "TRD-TEST-063": { "status": "completed", "component": "observability", "phase": 3, "artifact": "test/integration/scripts/verify-telemetry.sh" },
    "TRD-TEST-064": { "status": "completed", "component": "observability", "phase": 3, "artifact": "docs/TRD/testing-phase-telemetry-patterns.md" },
    "TRD-TEST-065": { "status": "completed", "component": "observability", "phase": 3, "artifact": "test/integration/scripts/verify-skill.sh" },
    "TRD-TEST-066": { "status": "pending", "component": "eval-framework", "phase": "4B" },
    "TRD-TEST-067": { "status": "pending", "component": "eval-framework", "phase": "4B" },
    "TRD-TEST-068": { "status": "pending", "component": "eval-framework", "phase": "4B" },
    "TRD-TEST-069": { "status": "pending", "component": "eval-framework", "phase": "4B" },
    "TRD-TEST-070": { "status": "pending", "component": "eval-framework", "phase": "4B" },
    "TRD-TEST-071": { "status": "pending", "component": "eval-framework", "phase": "4B" },
    "TRD-TEST-072": { "status": "pending", "component": "rubrics", "phase": "4B" },
    "TRD-TEST-073": { "status": "pending", "component": "rubrics", "phase": "4B" },
    "TRD-TEST-074": { "status": "pending", "component": "rubrics", "phase": "4B" },
    "TRD-TEST-075": { "status": "pending", "component": "eval-specs", "phase": "4B" },
    "TRD-TEST-076": { "status": "pending", "component": "eval-specs", "phase": "4B" },
    "TRD-TEST-077": { "status": "pending", "component": "eval-specs", "phase": "4B" },
    "TRD-TEST-078": { "status": "pending", "component": "eval-specs", "phase": "4B" },
    "TRD-TEST-079": { "status": "pending", "component": "eval-specs", "phase": "4B" },
    "TRD-TEST-080": { "status": "pending", "component": "eval-specs", "phase": "4B" },
    "TRD-TEST-081": { "status": "pending", "component": "eval-specs", "phase": "4B" },
    "TRD-TEST-082": { "status": "pending", "component": "eval-specs", "phase": "4B" },
    "TRD-TEST-083": { "status": "pending", "component": "eval-specs", "phase": "4B" },
    "TRD-TEST-084": { "status": "pending", "component": "eval-execution", "phase": 4 },
    "TRD-TEST-085": { "status": "pending", "component": "eval-execution", "phase": 4 }
  },
  "coverage": { "unit": 0.0, "integration": 0.0 },
  "checkpoints": [
    {
      "id": "phase-1-complete",
      "timestamp": "2026-01-13T21:15:00.000Z",
      "phase": 1,
      "tasks_completed": 29,
      "test_results": {
        "permitter": { "passed": 523, "failed": 0, "skipped": 0 },
        "router": { "passed": 107, "failed": 0, "skipped": 0 },
        "status_hook": { "passed": 61, "failed": 0, "skipped": 0 },
        "formatter_hook": { "passed": 79, "failed": 0, "skipped": 4 },
        "learning_hook": { "passed": 41, "failed": 0, "skipped": 0 },
        "scripts": { "passed": 49, "failed": 0, "skipped": 0 },
        "agent_validation": { "passed": 98, "failed": 0, "skipped": 0 }
      },
      "total_tests": { "passed": 958, "failed": 0, "skipped": 4 }
    },
    {
      "id": "phase-2-complete",
      "timestamp": "2026-01-13T22:30:00.000Z",
      "phase": 2,
      "tasks_completed": 10,
      "artifacts": {
        "repository": "ensemble-vnext-test-fixtures",
        "fixtures": ["python-cli", "flutter-widget", "typescript-validation", "fastapi-endpoint", "pytest-tests"],
        "scripts": ["run-headless.sh", "verify-output.sh", "run-ab-test.sh"],
        "config": ["permissive-allowlist.json"]
      }
    },
    {
      "id": "phase-4a-complete",
      "timestamp": "2026-01-13T23:45:00.000Z",
      "phase": "4A",
      "tasks_completed": 11,
      "artifacts": {
        "tests": [
          "test/integration/tests/vendoring.test.sh",
          "test/integration/tests/commands.test.sh",
          "test/integration/tests/helpers/setup.sh",
          "test/integration/tests/run-all.sh"
        ],
        "test_coverage": {
          "vendoring_tests": 26,
          "commands_tests": 28,
          "function_tests": 18,
          "total": 72
        }
      },
      "notes": "Phase 4A creates BATS integration tests for vendoring and command flows. Tests can be run with --functions for fast non-headless verification, or --live for full headless Claude session testing."
    },
    {
      "id": "phase-3-complete",
      "timestamp": "2026-01-13T14:30:00.000Z",
      "phase": 3,
      "tasks_completed": 4,
      "artifacts": {
        "scripts": [
          "test/integration/scripts/verify-telemetry.sh",
          "test/integration/scripts/verify-skill.sh"
        ],
        "documentation": [
          "docs/TRD/testing-phase-telemetry-patterns.md"
        ],
        "fixtures": [
          "test/integration/fixtures/sample-skill-session.jsonl",
          "test/integration/fixtures/sample-no-skills.jsonl"
        ]
      },
      "notes": "Phase 3 implements observability tooling: OTel config verification, telemetry capture verification, telemetry analysis patterns documentation, and skill verification utilities for A/B testing."
    }
  ],
  "active_sessions": {},
  "recovery": {
    "last_healthy_checkpoint": "phase-3-complete",
    "last_checkpoint_timestamp": "2026-01-13T14:30:00.000Z",
    "interrupted": false,
    "interrupt_reason": null
  },
  "metrics": {
    "total_tasks": 74,
    "completed_tasks": 54,
    "failed_tasks": 0,
    "superseded_tasks": 18,
    "pending_tasks": 20,
    "total_retries": 0
  },
  "revision_history": [
    {
      "timestamp": "2026-01-13T23:00:00.000Z",
      "change": "Consolidated Phase 3+5 into new Phase 4, moved Observability to Phase 3",
      "tasks_removed": 18,
      "reason": "Manual A/B tests superseded by automated eval framework"
    }
  ]
}
