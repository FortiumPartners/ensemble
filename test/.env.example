# =============================================================================
# OpenTelemetry Configuration for Ensemble vNext Testing
# =============================================================================
# Copy this file to .env and fill in your OTLP credentials.
# The .env file is gitignored to protect credentials.
# =============================================================================

# Enable Claude Code telemetry
CLAUDE_CODE_ENABLE_TELEMETRY=1

# OTLP Exporter Configuration
# For Grafana Cloud:
#   OTEL_EXPORTER_OTLP_ENDPOINT="https://otlp-gateway-prod-us-west-0.grafana.net/otlp"
#   OTEL_EXPORTER_OTLP_HEADERS="Authorization=Basic%20<base64-encoded-credentials>"
# For local Jaeger (gRPC):
#   OTEL_EXPORTER_OTLP_ENDPOINT="http://localhost:4317"
#   OTEL_EXPORTER_OTLP_PROTOCOL="grpc"
#   OTEL_EXPORTER_OTLP_HEADERS=""
OTEL_EXPORTER_OTLP_ENDPOINT="http://localhost:4317"
OTEL_EXPORTER_OTLP_PROTOCOL="http/protobuf"
OTEL_EXPORTER_OTLP_HEADERS=""

# Exporter types
# Options: console, otlp, none
OTEL_METRICS_EXPORTER=otlp
OTEL_LOGS_EXPORTER=otlp

# Faster export intervals for debugging (default: 60000ms for metrics, 5000ms for logs)
OTEL_METRIC_EXPORT_INTERVAL=10000
OTEL_LOGS_EXPORT_INTERVAL=5000

# Enable full prompt logging (default: redacted, only prompt_length shown)
# WARNING: This logs actual prompt content - be careful with sensitive data
OTEL_LOG_USER_PROMPTS=1

# Service identification
OTEL_SERVICE_NAME=ensemble-vnext-test
OTEL_RESOURCE_ATTRIBUTES="service.version=1.0.0,deployment.environment=test"

# =============================================================================
# Session Log Capture
# =============================================================================
# Enable SessionEnd hook to capture and commit all session logs.
# Works for both local and remote sessions:
#   - Remote: Preserves logs before VM terminates
#   - Local: Archives transcripts for analysis
ENSEMBLE_SAVE_REMOTE_LOGS=1

# Optional: Custom destination for captured logs (default: .claude-sessions/logs)
# ENSEMBLE_LOGS_DEST=".claude-sessions/logs"

# Enable debug logging for the save-remote-logs hook
# DEBUG_SAVE_LOGS=1
